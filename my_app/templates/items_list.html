{% extends '_base.html' %}
{% block content %}
	<h3>Items</h3>
	<form method="get" action="">
		<input type="text" name="search" value="{{ request.args.get('search', '') }}" placeholder="Cerca per nom">
		<button type="submit">Cerca</button>
	</form>
	<table>
		<tr>
			<th>ID</th>
			<th>NOM</th>
			<th>UNITATS</th>
			<th>SUPERMERCAT</th>
		</tr>

		{% for (item, store) in items_with_stores %}
		<tr>
			<td><a href="/items/read/{{ item.id }}">{{ item.id }}</a></td>
			<td><a href="/items/read/{{ item.id }}">{{ item.nom }}</a></td>
			<td><a href="/items/read/{{ item.id }}">{{ item.unitats }}</a></td>
			<td><a href="/items/read/{{ item.id }}">{{ store.nom }}</a></td>
		</tr>
		{% endfor %}
	</table>
	<div class="pagination">
		{% if items_with_stores.has_prev %}
			<a href="{{ url_for('main_bp.items_list', page=items_with_stores.prev_num, search=request.args.get('search', '')) }}">Anterior</a>
		{% endif %}
		<span>Pàgina {{ items_with_stores.page }} de {{ items_with_stores.pages }}</span>
		{% if items_with_stores.has_next %}
			<a href="{{ url_for('main_bp.items_list', page=items_with_stores.next_num, search=request.args.get('search', '')) }}">Següent</a>
		{% endif %}
	</div>
	{% if current_user.is_editor() %}
		<p><a href="/items/create">Crear un nou item</a></p>
	{% endif %}
{% endblock %}